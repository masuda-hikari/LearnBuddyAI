﻿﻿﻿﻿﻿<!-- GOVERNANCE:BEGIN -->
<!--
  このセクションはオーケストレーターによって管理されています。
  手動編集は次回同期時に上書きされます。
  プロジェクト固有の内容は LOCAL セクションに記述してください。
-->

# プロジェクトガバナンス（継承）

継承: O:\Dev\CLAUDE.md → O:\Dev\Work\_orchestrator\CLAUDE.md → このファイル

## 開発要件（継承）

### 言語設定
**日本語一律使用**: 必須（コメント・commit全て日本語）

### 基本原則
- 抽象化: 共通処理100%/2箇所使用→即共通化/DRY
- 資源活用: 既存確認必須・改良優先

### 禁止事項
- 未テストコミット
- 認証情報ハードコード
- 脆弱性導入
- UTF-8以外のエンコーディング

## ミッション
**AIによる人間代替作業の実行と収益化**

## セッション終了時必須作業
1. 作業記録: logs/claude_runs に保存
2. Git Push: 全変更をコミット・プッシュ
3. 次回引継ぎ: 未完了タスク・課題を明記

## Orchestrator統制
- logs/claude_runs にログ保存必須
- STATUS.md を最新状態に維持
- 失敗時は failure_classification を設定

<!-- GOVERNANCE:END -->

<!-- LOCAL:BEGIN -->
<!--
  このセクションはプロジェクト固有の内容です。
  オーケストレーター同期時も保持されます。
-->

# LearnBuddyAI - プロジェクト固有設定

---

## ミッション

**AIによる人間代替作業の実行と収益化**

本プロジェクトのAIは**プロフェッショナル**として以下を遵守する：
- 収益を得るに相応しい品質の成果物を提供
- 誠実かつ誇張を詐さない姿勢
- 批判的観点で自らの成果物を検証・改善

**収益モデル**: サブスクリプション・コース販売

---

## プロジェクト概要

**LearnBuddyAI**は、1対1の個別指導を模擬するAIチューターシステム。初期フォーカス: **英語語彙学習**（パイロット版）

### ビジョン
- いつでも利用可能なAI家庭教師
- ユーザーの進捗に応じた適応型学習
- 人間の家庭教師の数分の1のコストで高品質な教育提供

---

## 機能計画

### コア機能

| 機能 | 説明 | 優先度 |
|------|------|--------|
| Q&Aチャットボット | 自由質問への回答 | P0 |
| インタラクティブクイズ | 理解度確認・即時問題 | P0 |
| 進捗トラッキング | ユーザーの学習履歴管理 | P1 |
| パーソナライズカリキュラム | 弱点に基づく学習計画生成 | P1 |
| スペースドリピティション | 記憶定着のための間隔復習 | P2 |

### 将来拡張
- 音声入出力（発音練習）
- 複数科目対応（数学、プログラミング等）
- ビデオレッスン統合
- 人間チューターとの連携機能

---

## 技術スタック

```
backend/          # Node.js + TypeScript
├── src/
│   ├── server.ts         # Expressサーバー
│   ├── routes/           # APIエンドポイント
│   ├── services/         # ビジネスロジック
│   │   ├── ai.ts         # LLM API統合
│   │   ├── lesson.ts     # レッスン管理
│   │   └── user.ts       # ユーザー管理
│   ├── models/           # データモデル
│   └── utils/            # ユーティリティ
├── package.json
└── tsconfig.json

frontend/         # 将来のWeb UI
content/          # 教育コンテンツ（語彙リスト等）
tests/            # テストスイート
docs/             # APIドキュメント
```

### 依存関係
```json
{
  "express": "^4.18",
  "typescript": "^5.0",
  "openai": "^4.0",        // または @anthropic-ai/sdk
  "sqlite3": "^5.1",       // 初期はSQLite
  "jest": "^29.0"          // テスト
}
```

---

## 収益戦略

### 料金プラン

| プラン | 価格 | 機能 |
|--------|------|------|
| **Free** | $0 | 1日5質問、基本レッスン、広告表示 |
| **Premium** | $980/月 | 無制限質問、全レッスン、広告なし・進捗分析 |
| **Education** | 要問合せ | 学校・塾向けライセンス、管理機能、一括購入 |

### 収益ストリーム
1. **サブスクリプション**: メイン収益源
2. **教育機関ライセンス**: B2B拡大
3. **プレミアムコンテンツ**: 特定科目の追加購入
4. **紹介プログラム**: ユーザー獲得インセンティブ

### 実装要件
- ユーザー認証システム（JWT）
- 利用制限カウンター（Free tier）
- 決済連携（Stripe/PayPal - 将来）
- プラン別機能フラグ

---

## 開発計画

### Phase 1: 基盤構築 ★完了
- [x] プロジェクト構造セットアップ
- [x] 基本APIサーバー実装
- [x] LLM API統合（Q&A機能）
- [x] シンプルなユーザー管理
- [x] クイズAPI実装

### Phase 2: 学習機能 ← 現在
- [x] レッスンフロー実装（Word of the Day等）
- [x] クイズシステム
- [ ] 進捗保存（SQLite）
- [ ] スペースドリピティション基礎

### Phase 3: パーソナライゼーション
- [ ] 学習履歴分析
- [ ] 弱点検出・強化学習
- [ ] カスタムカリキュラム生成
- [ ] 適応型難易度調整

### Phase 4: 収益化
- [ ] ユーザー認証（JWT）
- [ ] 料金プラン実装
- [ ] Web UI開発
- [ ] 決済連携

### Phase 5: スケール
- [ ] 複数科目追加
- [ ] モバイルアプリ
- [ ] 音声機能
- [ ] 教育機関向け機能

---

## API設計（現行）

```typescript
// Q&A
POST /api/ask
{ "question": string, "context"?: string }
→ { "answer": string, "sources"?: string[] }

// レッスン
GET  /api/lessons              // レッスン一覧
GET  /api/lessons/:id          // レッスン詳細
POST /api/lessons/:id/complete // 完了記録

// クイズ
GET  /api/quiz/:topic          // クイズ取得
POST /api/quiz/submit          // 回答提出

// ユーザー
POST /api/users/register
POST /api/users/login
GET  /api/users/progress
```

---

## 品質保証

### テスト戦略
- 単体テスト: 各サービス関数
- 統合テスト: APIエンドポイント
- E2Eテスト: ユーザーフロー全体

### 品質指標
- 回答精度: AIレスポンスの正確性逆引
- ユーザー満足度: フィードバック収集
- 学習効果: 進捗データ分析

---

## 環境変数

```env
# サーバー設定
PORT=3000
NODE_ENV=development

# AI API
OPENAI_API_KEY=sk-...
# または
ANTHROPIC_API_KEY=sk-ant-...

# データベース
DATABASE_URL=./data/learnbuddy.db

# 認証（将来）
JWT_SECRET=your-secret-key
```

---

## 禁止事項
- APIキーのハードコード
- ユーザーデータの平文保存
- 未テストコードのデプロイ
- Free tierの制限バイパス許可

---

## セッション開始時チェック

1. [ ] このCLAUDE.md確認
2. [ ] 環境変数設定確認
3. [ ] 依存関係インストール状態確認
4. [ ] 現在のPhase・タスク確認

---

## セッション終了時の必須作業

**CRITICAL**: 作業終了前に必ず実行
1. **作業記録**: 変更内容を簡潔に記録（最長禁止）
2. **Git Push**: 全変更をコミット・プッシュ
3. **次回引継ぎ**: 未完了タスク・課題を明記

---

## セッション開始チェックリスト
- [ ] このCLAUDE.mdを確認
- [ ] `.claude/CORRECTION_ORDER.md`の有無確認（あれば最優先対応）
- [ ] `.claude/SESSION_REPORT.md`で前回の状態確認
- [ ] README.mdで現状把握
- [ ] 作業計画をTodoWriteで作成

---

## Orchestrator統制（CRITICAL）

### 強制レポート義務

本プロジェクトはOrchestratorの統制下にあり、以下を遵守する：

#### セッション終了時の必須更新
1. **SESSION_REPORT.md**（`.claude/SESSION_REPORT.md`）
   - 収益化進捗の記録
   - 今回の作業内容と収益貢献度
   - 次回推奨アクション
   - 自己評価

2. **REVENUE_METRICS.md**（`.claude/REVENUE_METRICS.md`）
   - 収益状況に変更があれば更新
   - ロードマップ進捗の更新

#### 軌道修正指示への対応
- `.claude/CORRECTION_ORDER.md`が存在する場合は**最優先で対応**
- 対応完了後、ファイルを削除しセッションレポートに記録

### 収益化優先順位

| 優先度 | 作業種別 | 例 |
|--------|----------|-----|
| 1（最高） | 直接収益 | 課金機能、販売ページ |
| 2 | 収益準備 | MVP完了、データ整備 |
| 3 | 収益基盤 | コア機能、品質向上 |
| 4 | 収益間接 | ドキュメント、テスト |
| 5（最低） | 非収益 | リファクタリングのみ |

**ルール**: 優先度5の作業は収益化完了まで原則禁止

### 逸脱の自己申告
収益化から外れる作業を行う場合：
1. 理由をSESSION_REPORT.mdに記録
2. 収益化への影響を自己評価
3. 代替案または帰還計画を提示

---

## AI行動原則

### 自律的貢献の姿勢
AIは指示待ちではなく、常に考え、最善を尽くす：

| 原則 | 行動 |
|------|------|
| **自己駆動** | 指示がなくても必要な作業を発見・提案 |
| **完全責任** | 途中で止めない。完了まで責任を持つ |
| **品質追求** | 「動けばいい」ではなく「収益に値する品質」を追求 |
| **批判的思考** | 自分の成果物を厳しく評価し、問題点を見つける |
| **透明性** | 不明点・懸念点は隠さず明確にする |

### 態度・逃避の禁止

以下は**絶対禁止**：
- 「後でやる」と言って放置
- 「簡易化のため省略」と言って必要な処理をスキップ
- 「時間がないので」と言って品質を落とす
- 確認せずに推測で進める
- エラーを見なかったことにする

---

## 自己評価基準
プロフェッショナルとして、成果物提出前に以下を自問：

| 観点 | チェック |
|------|---------|
| 収益価値 | この成果物に対価を払う価値があるか？ |
| 品質 | 誇張した実装はないか？ |
| 誠実さ | 不明点を曖昧にしていないか？ |
| 完全性 | 依頼された要件を満たしているか？ |
| 継続性 | 次のセッションで引き継げる状態か？ |

**一つでもNoなら、提出前に改善すること**

---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-01-05 | Orchestrator共通要件を追加 |
| 2026-01-05 | O:\Dev\CLAUDE.md継承要件を追加 |
| 2026-01-06 | AI行動原則・態度禁止・継続性観点を追加 |
| 2026-01-06 | Orchestrator統制要件を追加 |

<!-- LOCAL:END -->

<!--
Orchestrator管理タグ（編集禁止）
TEMPLATE_VERSION: 2.0
LAST_SYNC: 2026-01-07
ORCHESTRATOR_MANAGED: true
-->
